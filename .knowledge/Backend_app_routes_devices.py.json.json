{"is_source_file": true, "format": "Python", "description": "This file defines Flask route handlers for managing a device inventory API. It includes endpoint implementations for listing devices, creating new devices, retrieving, updating, and deleting individual device entries, along with helper functions for database interactions, validation, and error handling. It uses Flask, Flask-Smorest, pymongo, and environment variables for configuration.", "external_files": ["flask", "flask_smorest", "flask.views", "pymongo", "os", "typing"], "external_methods": ["request.get_json", "jsonify", "Blueprint", "MethodView", "MongoClient", "os.getenv"], "published": ["blp_devices"], "classes": [{"name": "DevicesList", "description": "Handles listing all devices via GET and adding new devices via POST."}, {"name": "DeviceDetail", "description": "Handles retrieval, update, and deletion of individual devices identified by 'name'."}], "methods": [{"name": "get(self)", "description": "Handles GET requests for listing all devices or retrieving a device by name.", "scope": "DevicesList", "scopeKind": "class"}, {"name": "post(self)", "description": "Handles POST requests to create a new device, ensuring name uniqueness.", "scope": "DevicesList", "scopeKind": "class"}, {"name": "put(self, name: str)", "description": "Handles PUT requests for updating device details excluding the name.", "scope": "DeviceDetail", "scopeKind": "class"}, {"name": "delete(self, name: str)", "description": "Handles DELETE requests to remove a device by name.", "scope": "DeviceDetail", "scopeKind": "class"}, {"name": "_error(code: int, message: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "_get_collection()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "List[str] _validate_device_create(payload: Dict[str, Any])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "List[str] _validate_device_update(payload: Dict[str, Any])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "get(self, name: str)", "scope": "DeviceDetail", "scopeKind": "class", "description": "unavailable"}], "calls": ["pymongo.MongoClient", "coll.find", "coll.find_one", "coll.insert_one", "coll.update_one", "coll.delete_one", "request.get_json", "jsonify", "_get_collection", "_error", "_validate_device_create", "_validate_device_update"], "search-terms": ["device routes", "MongoDB collection access", "device validation", "Flask blueprint devices", "CRUD device inventory", "device detail endpoint"], "state": 2, "file_id": 28, "knowledge_revision": 103, "git_revision": "50f8f03c666038c0e79a447f6ae8e06e769608ec", "ctags": [{"_type": "tag", "name": "DeviceDetail", "path": "/home/kavia/workspace/code-generation/device-inventory-6039-5923/Backend/app/routes/devices.py", "pattern": "/^class DeviceDetail(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "DevicesList", "path": "/home/kavia/workspace/code-generation/device-inventory-6039-5923/Backend/app/routes/devices.py", "pattern": "/^class DevicesList(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "MONGO_COLLECTION", "path": "/home/kavia/workspace/code-generation/device-inventory-6039-5923/Backend/app/routes/devices.py", "pattern": "/^MONGO_COLLECTION = os.getenv(\"MONGODB_COLLECTION\", \"devices\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "MONGO_DB", "path": "/home/kavia/workspace/code-generation/device-inventory-6039-5923/Backend/app/routes/devices.py", "pattern": "/^MONGO_DB = os.getenv(\"MONGODB_DB\", \"device_inventory\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "MONGO_URI", "path": "/home/kavia/workspace/code-generation/device-inventory-6039-5923/Backend/app/routes/devices.py", "pattern": "/^MONGO_URI = os.getenv(\"MONGODB_URI\", \"mongodb:\\/\\/localhost:27017\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_error", "path": "/home/kavia/workspace/code-generation/device-inventory-6039-5923/Backend/app/routes/devices.py", "pattern": "/^def _error(code: int, message: str):$/", "language": "Python", "kind": "function", "signature": "(code: int, message: str)"}, {"_type": "tag", "name": "_get_collection", "path": "/home/kavia/workspace/code-generation/device-inventory-6039-5923/Backend/app/routes/devices.py", "pattern": "/^def _get_collection():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_validate_device_create", "path": "/home/kavia/workspace/code-generation/device-inventory-6039-5923/Backend/app/routes/devices.py", "pattern": "/^def _validate_device_create(payload: Dict[str, Any]) -> List[str]:$/", "language": "Python", "typeref": "typename:List[str]", "kind": "function", "signature": "(payload: Dict[str, Any])"}, {"_type": "tag", "name": "_validate_device_update", "path": "/home/kavia/workspace/code-generation/device-inventory-6039-5923/Backend/app/routes/devices.py", "pattern": "/^def _validate_device_update(payload: Dict[str, Any]) -> List[str]:$/", "language": "Python", "typeref": "typename:List[str]", "kind": "function", "signature": "(payload: Dict[str, Any])"}, {"_type": "tag", "name": "blp_devices", "path": "/home/kavia/workspace/code-generation/device-inventory-6039-5923/Backend/app/routes/devices.py", "pattern": "/^blp_devices = Blueprint($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "delete", "path": "/home/kavia/workspace/code-generation/device-inventory-6039-5923/Backend/app/routes/devices.py", "pattern": "/^    def delete(self, name: str):$/", "language": "Python", "kind": "member", "signature": "(self, name: str)", "scope": "DeviceDetail", "scopeKind": "class"}, {"_type": "tag", "name": "get", "path": "/home/kavia/workspace/code-generation/device-inventory-6039-5923/Backend/app/routes/devices.py", "pattern": "/^    def get(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "DevicesList", "scopeKind": "class"}, {"_type": "tag", "name": "get", "path": "/home/kavia/workspace/code-generation/device-inventory-6039-5923/Backend/app/routes/devices.py", "pattern": "/^    def get(self, name: str):$/", "language": "Python", "kind": "member", "signature": "(self, name: str)", "scope": "DeviceDetail", "scopeKind": "class"}, {"_type": "tag", "name": "post", "path": "/home/kavia/workspace/code-generation/device-inventory-6039-5923/Backend/app/routes/devices.py", "pattern": "/^    def post(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "DevicesList", "scopeKind": "class"}, {"_type": "tag", "name": "put", "path": "/home/kavia/workspace/code-generation/device-inventory-6039-5923/Backend/app/routes/devices.py", "pattern": "/^    def put(self, name: str):$/", "language": "Python", "kind": "member", "signature": "(self, name: str)", "scope": "DeviceDetail", "scopeKind": "class"}], "hash": "9f136bfd0de41031dcedb46d3136d9b9", "format-version": 4, "code-base-name": "Backend", "filename": "Backend/app/routes/devices.py", "fields": [{"name": "MONGO_COLLECTION = os.getenv(\"MONGODB_COLLECTION\", \"devices\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "MONGO_DB = os.getenv(\"MONGODB_DB\", \"device_inventory\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "MONGO_URI = os.getenv(\"MONGODB_URI\", \"mongodb:\\/\\/localhost:27017\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "blp_devices = Blueprint(", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"103": "50f8f03c666038c0e79a447f6ae8e06e769608ec"}]}